
        <!DOCTYPE html>
        <html>
        <head>
            <meta charset="utf-8">
            <meta name="viewport" content="width=device-width, initial-scale=1.0">
            <title>ACO Bus Route Animation</title>
            
            <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" />
            <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>
            
            <style>
                body { margin: 0; padding: 0; }
                #map { position: absolute; top: 0; bottom: 0; width: 100%; }
                .bus-icon { font-size: 28px; filter: drop-shadow(2px 2px 3px rgba(0,0,0,0.7)); }
            </style>
        </head>
        <body>
            <div id="map"></div>
            
        <div id="busAnimationControl" style="position: fixed; top: 10px; left: 60px; z-index: 1000; background-color: white; 
            padding: 12px; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.6); border: 2px solid #333;">
            <h4 style="margin: 0 0 8px 0; text-align: center; font-weight: bold;">ACO Bus Route Simulation</h4>
            <button id="startAnimation" style="padding: 8px 15px; margin-right: 8px; background-color: #4CAF50; color: white; 
                    border: none; border-radius: 5px; cursor: pointer; font-weight: bold; font-size: 14px;">‚ñ∂ Start</button>
            <button id="pauseAnimation" style="padding: 8px 15px; margin-right: 8px; background-color: #FFC107; color: black; 
                    border: none; border-radius: 5px; cursor: pointer; font-weight: bold; font-size: 14px;" disabled>‚è∏ Pause</button>
            <button id="resetAnimation" style="padding: 8px 15px; background-color: #F44336; color: white; 
                    border: none; border-radius: 5px; cursor: pointer; font-weight: bold; font-size: 14px;">üîÑ Reset</button>
            <div id="busStatus" style="margin-top: 8px; font-size: 13px; font-weight: bold; text-align: center;">At: Start</div>
        </div>
        

            <script>
                var map = L.map('map').setView([16.5069, 80.6486], 12);

                L.tileLayer('https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png', {
                    attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors &copy; <a href="https://carto.com/attributions">CARTO</a>',
                    subdomains: 'abcd',
                    maxZoom: 19
                }).addTo(map);
        
                L.circleMarker([16.5069, 80.6486], {
                    color: 'darkred',
                    fillColor: 'red',
                    fillOpacity: 0.8,
                    radius: 8
                }).bindTooltip("Vijayawada Bus Station").addTo(map);
            
                L.circleMarker([16.43, 80.55], {
                    color: 'white',
                    fillColor: 'green',
                    fillOpacity: 0.8,
                    radius: 8
                }).bindTooltip("Mangalagiri Temple (10km SE)").addTo(map);
            
                L.polyline([[16.5066952, 80.649318],[16.5059769, 80.6480896],[16.5059447, 80.6480771],[16.5045896, 80.6477627],[16.5045093, 80.6479112],[16.5044566, 80.6480185],[16.5043608, 80.6479983],[16.5043387, 80.64796],[16.5031759, 80.6483885],[16.5023624, 80.648604],[16.5020061, 80.6486884],[16.5014839, 80.6486234],[16.501064, 80.6485754],[16.5005852, 80.6484425],[16.4999477, 80.6482953],[16.4993836, 80.6497794],[16.4992489, 80.6502042],[16.4991381, 80.6505323],[16.4990077, 80.6509495],[16.4989547, 80.651078],[16.498876, 80.6512687],[16.4987297, 80.6517134],[16.4985155, 80.6523228],[16.4983525, 80.6527626],[16.4982016, 80.6532114],[16.4979624, 80.653899],[16.497972, 80.6539435],[16.4979139, 80.6540582],[16.4979024, 80.6540648],[16.4977856, 80.6540574],[16.4977448, 80.6538751],[16.497407, 80.6535322],[16.4967498, 80.6526544],[16.4955379, 80.650561],[16.4942577, 80.6490948],[16.4939271, 80.6469217],[16.496654, 80.642442],[16.4996899, 80.6373906],[16.500124, 80.636642],[16.4994555, 80.63166],[16.4846978, 80.6202107],[16.4667835, 80.6138388],[16.4597212, 80.6095516],[16.4562375, 80.6067519],[16.4522911, 80.6021351],[16.4429564, 80.5917469],[16.4418865, 80.5905699],[16.4414926, 80.5903904],[16.4406782, 80.589427],[16.4372114, 80.5863296],[16.4346546, 80.5843199],[16.4341645, 80.5839413],[16.4306231, 80.5812126],[16.4284892, 80.5793278],[16.4275171, 80.5784764],[16.4266573, 80.5777191],[16.4263222, 80.5777103],[16.4238922, 80.5815595],[16.4234259, 80.5821824],[16.4234535, 80.5821402],[16.4281477, 80.5748444],[16.4283218, 80.574557],[16.4287064, 80.5739966],[16.4288465, 80.5737714],[16.4288662, 80.5737393],[16.4290663, 80.5733352],[16.4298238, 80.571816],[16.429839, 80.5717056],[16.4297668, 80.5716075],[16.4296862, 80.5715073],[16.4294547, 80.5711931],[16.4291264, 80.5708557],[16.4287287, 80.570467],[16.4287129, 80.570234],[16.4287235, 80.5699763],[16.4287493, 80.5697082],[16.4288061, 80.5694112],[16.428888, 80.5691356],[16.428951, 80.568623],[16.4288687, 80.5684801],[16.4286249, 80.5680833],[16.4286511, 80.5678495],[16.4287631, 80.5672654],[16.428875, 80.5666008],[16.4289672, 80.5661039],[16.4289796, 80.5660097],[16.429518, 80.5660359],[16.4303943, 80.5660563],[16.4304873, 80.5660585],[16.4305213, 80.5657172],[16.4305694, 80.5652654],[16.4306371, 80.5647765],[16.4308182, 80.5635435],[16.4309046, 80.5629758],[16.4309247, 80.5628187],[16.4309799, 80.5623883],[16.4310161, 80.5619696],[16.4310587, 80.5616867],[16.4311577, 80.5611134],[16.4311857, 80.5609391],[16.4312495, 80.5605521],[16.4312949, 80.5602165],[16.4315248, 80.5581251],[16.4316303, 80.5553804],[16.431631, 80.5553128],[16.4314891, 80.5521534],[16.4314433, 80.5514789],[16.4313955, 80.550888],[16.4313913, 80.550815],[16.4291238, 80.5497121],[16.4292071, 80.5493887],[16.429764, 80.5495566]], {
                    color: 'blue',
                    weight: 4,
                    opacity: 0.8
                }).addTo(map);
            
                var routeCoords = [[16.5066952, 80.649318],[16.5059769, 80.6480896],[16.5059447, 80.6480771],[16.5045896, 80.6477627],[16.5045093, 80.6479112],[16.5044566, 80.6480185],[16.5043608, 80.6479983],[16.5043387, 80.64796],[16.5031759, 80.6483885],[16.5023624, 80.648604],[16.5020061, 80.6486884],[16.5014839, 80.6486234],[16.501064, 80.6485754],[16.5005852, 80.6484425],[16.4999477, 80.6482953],[16.4993836, 80.6497794],[16.4992489, 80.6502042],[16.4991381, 80.6505323],[16.4990077, 80.6509495],[16.4989547, 80.651078],[16.498876, 80.6512687],[16.4987297, 80.6517134],[16.4985155, 80.6523228],[16.4983525, 80.6527626],[16.4982016, 80.6532114],[16.4979624, 80.653899],[16.497972, 80.6539435],[16.4979139, 80.6540582],[16.4979024, 80.6540648],[16.4977856, 80.6540574],[16.4977448, 80.6538751],[16.497407, 80.6535322],[16.4967498, 80.6526544],[16.4955379, 80.650561],[16.4942577, 80.6490948],[16.4939271, 80.6469217],[16.496654, 80.642442],[16.4996899, 80.6373906],[16.500124, 80.636642],[16.4994555, 80.63166],[16.4846978, 80.6202107],[16.4667835, 80.6138388],[16.4597212, 80.6095516],[16.4562375, 80.6067519],[16.4522911, 80.6021351],[16.4429564, 80.5917469],[16.4418865, 80.5905699],[16.4414926, 80.5903904],[16.4406782, 80.589427],[16.4372114, 80.5863296],[16.4346546, 80.5843199],[16.4341645, 80.5839413],[16.4306231, 80.5812126],[16.4284892, 80.5793278],[16.4275171, 80.5784764],[16.4266573, 80.5777191],[16.4263222, 80.5777103],[16.4238922, 80.5815595],[16.4234259, 80.5821824],[16.4234535, 80.5821402],[16.4281477, 80.5748444],[16.4283218, 80.574557],[16.4287064, 80.5739966],[16.4288465, 80.5737714],[16.4288662, 80.5737393],[16.4290663, 80.5733352],[16.4298238, 80.571816],[16.429839, 80.5717056],[16.4297668, 80.5716075],[16.4296862, 80.5715073],[16.4294547, 80.5711931],[16.4291264, 80.5708557],[16.4287287, 80.570467],[16.4287129, 80.570234],[16.4287235, 80.5699763],[16.4287493, 80.5697082],[16.4288061, 80.5694112],[16.428888, 80.5691356],[16.428951, 80.568623],[16.4288687, 80.5684801],[16.4286249, 80.5680833],[16.4286511, 80.5678495],[16.4287631, 80.5672654],[16.428875, 80.5666008],[16.4289672, 80.5661039],[16.4289796, 80.5660097],[16.429518, 80.5660359],[16.4303943, 80.5660563],[16.4304873, 80.5660585],[16.4305213, 80.5657172],[16.4305694, 80.5652654],[16.4306371, 80.5647765],[16.4308182, 80.5635435],[16.4309046, 80.5629758],[16.4309247, 80.5628187],[16.4309799, 80.5623883],[16.4310161, 80.5619696],[16.4310587, 80.5616867],[16.4311577, 80.5611134],[16.4311857, 80.5609391],[16.4312495, 80.5605521],[16.4312949, 80.5602165],[16.4315248, 80.5581251],[16.4316303, 80.5553804],[16.431631, 80.5553128],[16.4314891, 80.5521534],[16.4314433, 80.5514789],[16.4313955, 80.550888],[16.4313913, 80.550815],[16.4291238, 80.5497121],[16.4292071, 80.5493887],[16.429764, 80.5495566]];
                var segmentTransitions = [111];
                var routeLocations = ['Vijayawada Bus Station','Mangalagiri Temple (10km SE)'];
                var busIcon = 'üöå';
                var animationSpeed = 50;
                var busMarker = null;
                var animationRunning = false;
                var currentPosition = 0;
                var animationInterval;

                function createBusMarker() {
                    if (busMarker) {
                        map.removeLayer(busMarker);
                    }
                    busMarker = L.marker([routeCoords[0][0], routeCoords[0][1]], {
                        icon: L.divIcon({
                            html: '<div class="bus-icon">' + busIcon + '</div>',
                            iconSize: [35, 35],
                            iconAnchor: [17, 17]
                        })
                    });
                    busMarker.addTo(map);
                    return busMarker;
                }

                function startAnimation() {
                    if (animationRunning) return;
                    animationRunning = true;
                    document.getElementById('startAnimation').disabled = true;
                    document.getElementById('pauseAnimation').disabled = false;
                    if (!busMarker) busMarker = createBusMarker();
                    
                    animationInterval = setInterval(function() {
                        if (currentPosition >= routeCoords.length - 1) {
                            clearInterval(animationInterval);
                            document.getElementById('startAnimation').disabled = false;
                            document.getElementById('pauseAnimation').disabled = true;
                            document.getElementById('busStatus').innerHTML = 'At: Destination';
                            animationRunning = false;
                            return;
                        }
                        currentPosition++;
                        busMarker.setLatLng([routeCoords[currentPosition][0], routeCoords[currentPosition][1]]);
                        map.panTo([routeCoords[currentPosition][0], routeCoords[currentPosition][1]]);
                    }, animationSpeed);
                }

                function pauseAnimation() {
                    clearInterval(animationInterval);
                    document.getElementById('startAnimation').disabled = false;
                    document.getElementById('pauseAnimation').disabled = true;
                    animationRunning = false;
                }

                function resetAnimation() {
                    clearInterval(animationInterval);
                    currentPosition = 0;
                    animationRunning = false;
                    document.getElementById('startAnimation').disabled = false;
                    document.getElementById('pauseAnimation').disabled = true;
                    document.getElementById('busStatus').innerHTML = 'At: Start';
                    if (busMarker) {
                        busMarker.setLatLng([routeCoords[0][0], routeCoords[0][1]]);
                        map.panTo([routeCoords[0][0], routeCoords[0][1]]);
                    }
                }

                document.getElementById('startAnimation').addEventListener('click', startAnimation);
                document.getElementById('pauseAnimation').addEventListener('click', pauseAnimation);
                document.getElementById('resetAnimation').addEventListener('click', resetAnimation);
                createBusMarker();
            </script>
        </body>
        </html>
        